[build]
# Usa Nixpacks como el builder para instalar dependencias del sistema y preparar el entorno
builder = "Nixpacks"

# Comando personalizado para preparar el entorno
cmd = """
apt-get update && apt-get install -y \
    libgl1-mesa-glx \
    libglib2.0-0 \
    gcc \
    && python -m venv .venv \
    && . .venv/bin/activate \
    && pip install --upgrade pip setuptools wheel
"""

[start]
# Comando para activar el entorno, instalar dependencias y ejecutar el servidor
cmd = """
. .venv/bin/activate \
    && pip install --no-cache-dir django gunicorn tensorflow matplotlib opencv-python pillow \
    && gunicorn DRD.wsgi:application --bind 0.0.0.0:$PORT
"""
